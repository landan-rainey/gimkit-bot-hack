var socket = null;
var lastDataSent = null;
var using = null;

const nativeSend = window.WebSocket.prototype.send;
window.WebSocket.prototype.send = function(data) {
	nativeSend.call(this, data);
	var enc = new TextDecoder("utf-8");
	if (data != 2 && enc.decode(data).includes("answer")) {
		lastDataSent = data;
	}
	socket = this;
};

document.onkeydown = (e) => {
	if (e.repeat) {
		return
	}
	if (e.key == ";") {
		using = lastDataSent;
		alert("Saved.");
	} else if (e.key == "u") {
		if (socket && using) {
			socket.send(using);
		} else {
			alert("Try answering a question first.");
		};
	};
};
alert(Object.isFrozen(window.WebSocket.prototype)?"Refresh and try again.":"Started.");
